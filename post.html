<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vest – Balkan Mining · Mermer Invest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <style>
        :root {
            --bg: #0e141f;
            --surface: rgba(14, 22, 35, 0.86);
            --surface-strong: rgba(18, 28, 41, 0.94);
            --text: #f8fafc;
            --muted: #9aa5b5;
            --accent: #d4a017;
            --accent-soft: #f1c96b;
            --line: rgba(148, 163, 184, 0.18);
            --radius-lg: 28px;
            --radius-md: 18px;
            --radius-sm: 12px;
            --shadow-lg: 0 32px 90px rgba(4, 9, 20, 0.55);
            --shadow-card: 0 18px 40px rgba(6, 11, 22, 0.45);
            --font-sans: 'Montserrat', 'Inter', sans-serif;
            --font-display: 'Playfair Display', 'Times New Roman', serif;
        }

        *, *::before, *::after { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            font-family: var(--font-sans);
            background: radial-gradient(circle at top, rgba(28, 46, 70, 0.35), transparent 60%), var(--bg);
            color: var(--text);
            line-height: 1.7;
        }
        main { flex: 1; }
        img { max-width: 100%; display: block; }
        a { color: inherit; text-decoration: none; }
        h1, h2, h3 { margin: 0; line-height: 1.2; }
        h1 { font-family: var(--font-display); font-size: clamp(2.4rem, 5vw, 3.5rem); letter-spacing: -0.02em; }
        h2 { font-family: var(--font-display); font-size: clamp(2rem, 4vw, 2.8rem); margin-top: 2.2rem; }
        h3 { font-size: clamp(1.2rem, 2.4vw, 1.6rem); margin-top: 2rem; }
        p { margin: 0 0 1.4rem; color: var(--muted); }
        ul { margin: 1rem 0 1.4rem 1.2rem; color: var(--muted); }
        blockquote { margin: 2rem 0; padding: 1.5rem 2rem; border-left: 4px solid rgba(212,160,23,0.6); background: rgba(148,163,184,0.1); border-radius: var(--radius-md); color: #fff; }
        .container { width: min(900px, calc(100% - 48px)); margin: 0 auto; }
        .eyebrow { display: inline-flex; align-items: center; gap: 0.4rem; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.4em; text-transform: uppercase; color: var(--accent-soft); }
        .eyebrow::before { content: ''; width: 28px; height: 1px; background: var(--accent-soft); opacity: 0.8; }

        .site-header { position: relative; z-index: 40; }
        .nav {
            position: fixed;
            top: 28px;
            left: 50%;
            transform: translateX(-50%);
            width: min(1120px, calc(100% - 32px));
            padding: 14px 22px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 18px;
            background: linear-gradient(140deg, rgba(17, 27, 42, 0.92), rgba(12, 19, 30, 0.78));
            border: 1px solid var(--line);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            backdrop-filter: blur(18px);
        }
        .nav-left { display: flex; align-items: center; gap: 16px; }
        .nav-left a { display: inline-flex; align-items: center; background: rgba(255,255,255,0.04); padding: 6px 10px; border-radius: 14px; border: 1px solid rgba(148,163,184,0.18); }
        .nav-left img { height: 58px; width: auto; }
        .nav-tagline { font-size: 0.72rem; letter-spacing: 0.38em; text-transform: uppercase; color: var(--muted); font-weight: 600; }
        .nav-right { display: flex; align-items: center; gap: 18px; }
        .nav-inline { display: none; align-items: center; gap: 22px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.18em; }
        .nav-inline a { color: var(--muted); padding-bottom: 6px; border-bottom: 2px solid transparent; transition: color .3s ease, border-color .3s ease; }
        .nav-inline a:hover, .nav-inline a:focus-visible { color: var(--text); border-bottom-color: var(--accent); }
        .nav-inline .nav-cta { color: var(--accent-soft); }
        .nav-burger { width: 50px; height: 50px; border-radius: 16px; border: 1px solid rgba(148,163,184,0.22); background: rgba(255,255,255,0.06); display: grid; place-items: center; cursor: pointer; }
        .nav-burger span { display: block; width: 22px; height: 2px; background: #fff; margin: 3px 0; }
        .nav-overlay { position: fixed; inset: 0; background: rgba(5,9,18,0.92); display: none; z-index: 60; align-items: center; justify-content: center; backdrop-filter: blur(12px); }
        .nav-overlay.open { display: flex; }
        .nav-close { position: absolute; top: 28px; right: 40px; width: 54px; height: 54px; border-radius: 18px; border: 1px solid rgba(148,163,184,0.3); background: rgba(255,255,255,0.1); font-size: 28px; color: #fff; cursor: pointer; }
        .nav-links { display: flex; flex-direction: column; gap: 18px; align-items: center; }
        .nav-links a { font-size: 2rem; font-weight: 700; letter-spacing: 0.08em; color: #fff; }
        .nav-links a:hover { color: var(--accent-soft); }
        @media (min-width:900px){ .nav-inline{display:flex;} .nav-burger{display:none;} }
        @media (max-width:640px){ .nav{width:calc(100% - 24px); padding:12px 16px;} .nav-left img{height:48px;} .nav-tagline{display:none;} }

        .btn { display:inline-flex; align-items:center; justify-content:center; gap:0.5rem; padding:0.95rem 1.8rem; border-radius:999px; border:1px solid transparent; font-size:0.82rem; font-weight:700; text-transform:uppercase; letter-spacing:0.22em; transition:transform .3s ease, background .3s ease, color .3s ease, box-shadow .3s ease; }
        .btn:hover,.btn:focus-visible{ transform:translateY(-3px); }
        .btn-primary{ background:linear-gradient(135deg,#f8e29c,#d4a017); color:#1d1b14; box-shadow:0 18px 32px rgba(212,160,23,0.35); }
        .btn-light{ background:rgba(255,255,255,0.12); color:var(--text); border:1px solid rgba(255,255,255,0.22); }
        .btn-ghost{ background:rgba(255,255,255,0.04); color:var(--text); border:1px solid rgba(148,163,184,0.18); }

        .article-page { padding: clamp(6rem, 12vw, 8rem) 0 clamp(4rem, 10vw, 6rem); }
        .back-link { display:inline-flex; align-items:center; gap:0.6rem; font-size:0.85rem; letter-spacing:0.18em; text-transform:uppercase; color:var(--muted); margin-bottom:1.5rem; }
        .back-link i { color: var(--accent-soft); }
        .article-header { display:grid; gap:1rem; margin-bottom:2.4rem; }
        .article-meta { display:flex; gap:0.9rem; flex-wrap:wrap; font-size:0.78rem; letter-spacing:0.18em; text-transform:uppercase; color:var(--muted); }
        .article-hero { border-radius: var(--radius-lg); border:1px solid var(--line); overflow:hidden; box-shadow:var(--shadow-card); margin-bottom:2.4rem; background:rgba(148,163,184,0.12); }
        .article-hero img { width:100%; height: clamp(320px, 50vw, 520px); object-fit:cover; }
        .article-body { color: var(--muted); font-size:1.02rem; }
        .article-body a { color: var(--accent-soft); text-decoration: underline; }
        .article-gallery { display:grid; gap:1rem; margin: 2.8rem 0; }
        @media (min-width:640px){ .article-gallery { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
        .article-gallery img { border-radius: var(--radius-md); border:1px solid rgba(148,163,184,0.22); box-shadow: var(--shadow-card); }
        .article-video { margin: 2.8rem 0; }
        .article-video iframe { width:100%; aspect-ratio:16/9; border:0; border-radius:var(--radius-lg); box-shadow:var(--shadow-card); }

        .share-card { margin: 2.8rem 0; padding:2rem; border-radius:var(--radius-lg); border:1px solid var(--line); background:rgba(148,163,184,0.12); display:grid; gap:1rem; }
        .share-buttons { display:flex; flex-wrap:wrap; gap:0.8rem; }
        .share-buttons a { padding:0.6rem 1.2rem; border-radius:999px; border:1px solid rgba(212,160,23,0.35); background:rgba(212,160,23,0.16); color:var(--accent-soft); font-size:0.75rem; letter-spacing:0.18em; text-transform:uppercase; }

        .related-section { margin-top:3.6rem; }
        .related-grid { display:grid; gap:1.6rem; margin-top:1.6rem; }
        @media (min-width:960px){ .related-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
        .related-card { background: var(--surface); border-radius: var(--radius-lg); border:1px solid var(--line); box-shadow:var(--shadow-card); overflow:hidden; display:grid; }
        .related-thumb { position:relative; padding-top:56%; background:rgba(148,163,184,0.12); overflow:hidden; }
        .related-thumb img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transition:transform .4s ease; }
        .related-thumb:hover img { transform:scale(1.05); }
        .related-body { padding:1.6rem; display:grid; gap:0.6rem; }
        .related-body h3 { font-size:1.1rem; color:#fff; }
        .related-body span { font-size:0.78rem; letter-spacing:0.18em; text-transform:uppercase; color:var(--muted); }

        footer { padding:1.8rem; text-align:center; font-size:0.85rem; color:var(--muted); border-top:1px solid rgba(148,163,184,0.12); background:rgba(5,10,18,0.65); }
        footer a { color: var(--accent-soft); }

        .social-icons { position:fixed; left:28px; bottom:28px; display:flex; flex-direction:column; gap:12px; z-index:30; }
        .social-icons a { width:42px; height:42px; border-radius:14px; background:rgba(17,27,42,0.88); border:1px solid rgba(148,163,184,0.18); display:grid; place-items:center; color:var(--muted); transition:transform .3s ease, color .3s ease, border-color .3s ease; }
        .social-icons a:hover { transform:translateY(-4px); color:var(--accent-soft); border-color:rgba(212,160,23,0.45); }
        @media (max-width:720px){ .social-icons{left:16px; bottom:18px;} .social-icons a{width:36px; height:36px;} }

        .chat-widget { position:fixed; bottom:24px; right:24px; width:320px; height:430px; background:rgba(11,18,29,0.94); border-radius:24px; border:1px solid rgba(148,163,184,0.22); box-shadow:var(--shadow-lg); display:none; flex-direction:column; overflow:hidden; backdrop-filter:blur(18px); z-index:80; }
        .chat-header { padding:1rem 1.4rem; display:flex; align-items:center; justify-content:space-between; background:rgba(17,27,42,0.88); color:#fff; font-weight:600; }
        .chat-header button { background:rgba(255,255,255,0.08); border:1px solid rgba(148,163,184,0.18); border-radius:999px; width:34px; height:34px; color:#fff; cursor:pointer; }
        .chat-body { flex:1; padding:1.1rem; display:flex; flex-direction:column; gap:0.8rem; overflow-y:auto; }
        .message { display:flex; }
        .message .bubble { padding:0.85rem 1.1rem; border-radius:18px; border:1px solid rgba(148,163,184,0.2); background:rgba(255,255,255,0.06); color:var(--text); font-size:0.88rem; line-height:1.4; max-width:80%; }
        .message.user { justify-content:flex-end; }
        .message.user .bubble { background:rgba(212,160,23,0.2); color:var(--accent-soft); border-color:rgba(212,160,23,0.35); }
        .chat-input { padding:1rem; display:flex; gap:0.6rem; border-top:1px solid rgba(148,163,184,0.18); background:rgba(11,18,29,0.88); }
        .chat-input input { flex:1; padding:0.75rem 1rem; border-radius:14px; border:1px solid rgba(148,163,184,0.26); background:rgba(4,9,18,0.4); color:#fff; }
        .chat-input button { padding:0.75rem 1.4rem; border-radius:14px; border:none; font-weight:600; background:linear-gradient(135deg,#f8e29c,#d4a017); color:#1d1b14; cursor:pointer; }
        @media (max-width:520px){ .chat-widget{width:calc(100% - 32px); right:16px; bottom:16px;} }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="nav">
            <div class="nav-left">
                <a href="https://ibb.co/QGRBCQd" aria-label="Balkan Mining logo"><img src="https://i.ibb.co/8Vp3dsc/Screenshot-1.png" alt="Balkan Mining logo"></a>
                <span class="nav-tagline">Mermer Invest</span>
            </div>
            <div class="nav-right">
                <nav class="nav-inline" aria-label="Glavna navigacija">
                    <a href="index.html">Početna</a>
                    <a href="about.html">O nama</a>
                    <a href="catalog.html" class="nav-cta">Katalog</a>
                    <a href="blog.html">Blog</a>
                    <a href="contact.html">Kontakt</a>
                </nav>
                <button class="nav-burger" id="navBurger" aria-label="Otvori meni"><span></span><span></span><span></span></button>
            </div>
        </div>
    </header>
    <div class="nav-overlay" id="navOverlay">
        <button class="nav-close" id="navClose" aria-label="Zatvori meni">×</button>
        <nav class="nav-links" aria-label="Meni">
            <a href="index.html">Početna</a>
            <a href="about.html">O nama</a>
            <a href="catalog.html">Katalog</a>
            <a href="blog.html">Blog</a>
            <a href="contact.html">Kontakt</a>
        </nav>
    </div>

    <main>
        <article class="article-page" id="article">
            <div class="container">
                <a href="blog.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Nazad na vesti</a>
                <header class="article-header">
                    <span class="eyebrow" id="articleTagline">Saopštenje</span>
                    <h1 id="articleTitle">Učitavanje...</h1>
                    <p id="articleLead">Vest se učitava. Molimo sačekajte trenutak.</p>
                    <div class="article-meta">
                        <span id="articleDate">—</span>
                        <span id="articleAuthor">Balkan Mining</span>
                        <span id="articleTags"></span>
                    </div>
                </header>
                <figure class="article-hero" id="articleHeroWrapper" style="display:none;">
                    <img id="articleHero" alt="Hero vizual vesti">
                </figure>
                <div class="article-body" id="articleContent">
                    <p>Članak nije učitan.</p>
                </div>
                <div class="article-gallery" id="articleGallery" style="display:none;"></div>
                <div class="article-video" id="articleVideo" style="display:none;"></div>
                <div class="share-card">
                    <h3>Podelite vest</h3>
                    <div class="share-buttons">
                        <a href="#" id="shareLinkedIn" target="_blank" rel="noopener">LinkedIn</a>
                        <a href="#" id="shareFacebook" target="_blank" rel="noopener">Facebook</a>
                        <a href="#" id="shareMail">Email</a>
                    </div>
                </div>
                <section class="related-section">
                    <h2>Još iz naše arhive</h2>
                    <div class="related-grid" id="relatedPosts"></div>
                </section>
            </div>
        </article>
    </main>

    <footer>
        © <span id="currentYear"></span> Balkan Mining – Mermer Invest. <a href="mailto:office@balkanmining.rs">office@balkanmining.rs</a>
    </footer>

    <div class="social-icons" aria-label="Društvene mreže">
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
        <a href="#" aria-label="X"><i class="fab fa-x-twitter"></i></a>
        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    </div>

    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">Chat sa Grok-om
            <div>
                <button onclick="minimizeMaximizeChatWidget()" id="minimizeMaximizeButton" aria-label="Minimizuj chat">-</button>
                <button onclick="closeChatWidget()" aria-label="Zatvori chat">×</button>
            </div>
        </div>
        <div class="chat-body" id="chatBody"></div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Postavi pitanje...">
            <button onclick="sendMessage()">Pošalji</button>
        </div>
    </div>

    <script>
        const apiKey = window.GROK_API_KEY || '';
        const endpoint = 'https://api.x.ai/v1/chat/completions';
        let chatOpen = false;
        let isMinimized = false;

        const navBurger = document.getElementById('navBurger');
        const navOverlay = document.getElementById('navOverlay');
        const navClose = document.getElementById('navClose');

        if (navBurger && navOverlay && navClose) {
            navBurger.addEventListener('click', () => navOverlay.classList.add('open'));
            navClose.addEventListener('click', () => navOverlay.classList.remove('open'));
            navOverlay.addEventListener('click', e => { if (e.target === navOverlay) navOverlay.classList.remove('open'); });
        }

        function openChatWidget() {
            const chatWidget = document.getElementById('chatWidget');
            chatOpen = !chatOpen;
            chatWidget.style.display = chatOpen ? 'flex' : 'none';
            if (chatOpen && isMinimized) minimizeMaximizeChatWidget();
        }

        function closeChatWidget() {
            document.getElementById('chatWidget').style.display = 'none';
            chatOpen = false;
        }

        function minimizeMaximizeChatWidget() {
            const chatBody = document.getElementById('chatBody');
            const chatInput = document.querySelector('.chat-input');
            const toggle = document.getElementById('minimizeMaximizeButton');
            if (!isMinimized) {
                chatBody.style.display = 'none';
                chatInput.style.display = 'none';
                document.getElementById('chatWidget').style.height = '60px';
                toggle.textContent = '+';
                isMinimized = true;
            } else {
                chatBody.style.display = 'flex';
                chatInput.style.display = 'flex';
                document.getElementById('chatWidget').style.height = '430px';
                toggle.textContent = '-';
                isMinimized = false;
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const userMessage = input.value.trim();
            if (!userMessage) return;
            addMessage('user', userMessage);
            input.value = '';

            if (!apiKey) {
                addMessage('bot', 'Chat asistencija trenutno nije aktivna. Molimo kontaktirajte nas putem forme ili telefona.');
                return;
            }

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'grok-4-latest',
                        messages: [
                            { role: 'system', content: 'You are a helpful assistant for Balkan Mining - Mermer Invest.' },
                            { role: 'user', content: userMessage }
                        ],
                        stream: false,
                        temperature: 0
                    })
                });
                const data = await response.json();
                if (response.ok) {
                    addMessage('bot', data.choices[0].message.content || 'Nema odgovora.');
                } else {
                    addMessage('bot', 'Greška: ' + (data.error?.message || 'Server problem'));
                }
            } catch (error) {
                addMessage('bot', 'Greška u konekciji: ' + error.message);
            }
        }

        function addMessage(sender, message) {
            const chatBody = document.getElementById('chatBody');
            const wrap = document.createElement('div');
            wrap.classList.add('message', sender);
            const bubble = document.createElement('div');
            bubble.classList.add('bubble');
            bubble.textContent = message;
            wrap.appendChild(bubble);
            chatBody.appendChild(wrap);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>

    <script>
        const EXCEL_FILE = 'news.xlsx';

        function getSlug(){
            const url = new URL(window.location.href);
            return url.searchParams.get('slug');
        }

        function fmtDate(d){
            try {
                const x = new Date(d);
                return x.toLocaleDateString('sr-RS', { day:'2-digit', month:'2-digit', year:'numeric' });
            } catch { return d; }
        }

        function slugify(s){
            return String(s || '').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
        }

        async function loadArticle(){
            const res = await fetch(EXCEL_FILE);
            if (!res.ok) throw new Error('Ne mogu da učitam news.xlsx');
            const buf = await res.arrayBuffer();
            const wb = XLSX.read(buf, { type:'array' });
            const ws = wb.Sheets[wb.SheetNames[0]];
            const rows = XLSX.utils.sheet_to_json(ws, { defval:'' });
            return rows.map(r => ({
                id: r.id || '',
                slug: r.slug || slugify(r.title || r.id || ''),
                title: r.title || '(bez naslova)',
                subtitle: r.subtitle || '',
                author: r.author || 'Balkan Mining',
                date: r.date || new Date().toISOString(),
                tags: r.tags || '',
                hero_image: r.hero_image || '',
                gallery: r.gallery || '',
                video_url: r.video_url || '',
                summary: r.summary || '',
                body_html: r.body_html || '',
                views: Number(r.views || 0)
            }));
        }

        function renderArticle(article, all){
            document.title = `${article.title} – Balkan Mining · Mermer Invest`;
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleLead').textContent = article.summary || article.subtitle || 'Vest iz naše arhive.';
            document.getElementById('articleDate').textContent = fmtDate(article.date);
            document.getElementById('articleAuthor').textContent = article.author || 'Balkan Mining';
            const tags = (article.tags || '').split(',').map(t => t.trim()).filter(Boolean);
            document.getElementById('articleTags').textContent = tags.length ? tags.join(' • ') : 'Bez tagova';
            document.getElementById('articleTagline').textContent = tags[0] || 'Saopštenje';

            const heroWrapper = document.getElementById('articleHeroWrapper');
            if (article.hero_image) {
                heroWrapper.style.display = 'block';
                document.getElementById('articleHero').src = article.hero_image;
                document.getElementById('articleHero').alt = article.title;
            }

            const content = document.getElementById('articleContent');
            content.innerHTML = article.body_html || '<p>Tekst će uskoro biti dostupan.</p>';

            const galleryContainer = document.getElementById('articleGallery');
            const gallery = (article.gallery || '').split(',').map(u => u.trim()).filter(Boolean);
            if (gallery.length) {
                galleryContainer.style.display = 'grid';
                gallery.forEach(url => {
                    const img = document.createElement('img');
                    img.src = url;
                    img.alt = article.title;
                    galleryContainer.appendChild(img);
                });
            }

            const videoContainer = document.getElementById('articleVideo');
            if (article.video_url) {
                videoContainer.style.display = 'block';
                videoContainer.innerHTML = `<iframe src="${article.video_url}" title="Video" allowfullscreen loading="lazy"></iframe>`;
            }

            const currentUrl = window.location.href;
            document.getElementById('shareLinkedIn').href = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(currentUrl)}&title=${encodeURIComponent(article.title)}`;
            document.getElementById('shareFacebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`;
            document.getElementById('shareMail').href = `mailto:?subject=${encodeURIComponent(article.title)}&body=${encodeURIComponent(currentUrl)}`;

            const related = document.getElementById('relatedPosts');
            related.innerHTML = '';
            const relatedItems = all.filter(it => it.slug !== article.slug).filter(it => {
                if (!tags.length) return true;
                const itemTags = (it.tags || '').split(',').map(t => t.trim());
                return itemTags.some(t => tags.includes(t));
            }).slice(0,3);
            relatedItems.forEach(item => {
                const card = document.createElement('article');
                card.className = 'related-card';
                card.innerHTML = `
                    <a class="related-thumb" href="post.html?slug=${encodeURIComponent(item.slug)}">
                        ${item.hero_image ? `<img src="${item.hero_image}" alt="${item.title}">` : ''}
                    </a>
                    <div class="related-body">
                        <span>${fmtDate(item.date)}</span>
                        <h3><a href="post.html?slug=${encodeURIComponent(item.slug)}">${item.title}</a></h3>
                    </div>
                `;
                related.appendChild(card);
            });
        }

        (async function(){
            const slug = getSlug();
            const container = document.getElementById('article');
            if (!slug) {
                container.innerHTML = '<div class="container"><p>Vest nije pronađena.</p></div>';
                return;
            }
            try {
                const all = await loadArticle();
                const article = all.find(a => a.slug === slug);
                if (!article) {
                    container.innerHTML = '<div class="container"><p>Vest nije pronađena ili je uklonjena.</p></div>';
                    return;
                }
                renderArticle(article, all);
            } catch (error) {
                console.error(error);
                container.innerHTML = '<div class="container"><p>Došlo je do greške pri učitavanju vesti. Pokušajte ponovo.</p></div>';
            }
        })();
    </script>
</body>
</html>
